define("ghost/assets/lib/touch-editor",["exports"],function(a){"use strict";var b=function(){var a,b=function(){};return a=function(a){this.textarea=a,this.win={document:this.textarea},this.ready=!0,this.wrapping=document.createElement("div");var b=this.textarea.parentNode;this.wrapping.appendChild(this.textarea),b.appendChild(this.wrapping),this.textarea.style.opacity=1},a.prototype={setOption:function(a,b){"onChange"===a&&$(this.textarea).change(b)},eachLine:function(){return[]},getValue:function(){return this.textarea.value},setValue:function(a){this.textarea.value=a},focus:b,getCursor:function(){return{line:0,ch:0}},setCursor:b,currentLine:function(){return 0},cursorPosition:function(){return{character:0}},addMarkdown:b,nthLine:b,refresh:b,selectLines:b,on:b,off:b},a};a["default"]=b}),define("ghost/assets/lib/uploader",["ghost/utils/ghost-paths","exports"],function(a,b){"use strict";var c,d,e=a["default"],f=e();c=function(a,b){var c='<div class="js-url"><input class="url js-upload-url" type="url" placeholder="http://"/></div>',d='<a class="image-cancel js-cancel" title="Delete"><span class="hidden">Delete</span></a>',e=$("<div />",{"class":"js-upload-progress progress progress-success active",role:"progressbar","aria-valuemin":"0","aria-valuemax":"100"}).append($("<div />",{"class":"js-upload-progress-bar bar",style:"width:0%"}));$.extend(this,{complete:function(c){function d(b,c){a.find("img.js-upload-target").attr({width:b,height:c}).css({display:"block"}),a.find(".fileupload-loading").remove(),a.css({height:"auto"}),a.delay(250).animate({opacity:100},1e3,function(){$(".js-button-accept").prop("disabled",!1),i.init()})}function g(b){a.animate({opacity:0},250,function(){a.removeClass("image-uploader").addClass("pre-image-uploader"),a.css({minHeight:0}),i.removeExtras(),a.animate({height:b.height()},250,function(){d(b.width(),b.height())})})}function h(){var d=a.find("img.js-upload-target").attr({src:"",width:"auto",height:"auto"});e.animate({opacity:0},250,function(){a.find("span.media").after('<img class="fileupload-loading"  src="'+f.subdir+'/ghost/img/loadingcat.gif" />'),b.editor||e.find(".fileupload-loading").css({top:"56px"})}),a.trigger("uploadsuccess",[c]),d.one("load",function(){g(d)}).attr("src",c)}var i=this;h()},bindFileUpload:function(){var c=this;a.find(".js-fileupload").fileupload().fileupload("option",{url:f.subdir+"/ghost/api/v0.1/uploads/",add:function(c,d){$(".js-button-accept").prop("disabled",!0),a.find(".js-fileupload").removeClass("right"),a.find(".js-url").remove(),e.find(".js-upload-progress-bar").removeClass("fail"),a.trigger("uploadstart",[a.attr("id")]),a.find("span.media, div.description, a.image-url, a.image-webcam").animate({opacity:0},250,function(){a.find("div.description").hide().css({opacity:100}),b.progressbar&&(a.find("div.js-fail").after(e),e.animate({opacity:100},250)),d.submit()})},dropZone:b.fileStorage?a:null,progressall:function(c,d){var f=parseInt(d.loaded/d.total*100,10);b.editor||e.find("div.js-progress").css({position:"absolute",top:"40px"}),b.progressbar&&(a.trigger("uploadprogress",[f,d]),e.find(".js-upload-progress-bar").css("width",f+"%"))},fail:function(b,d){$(".js-button-accept").prop("disabled",!1),a.trigger("uploadfailure",[d.result]),a.find(".js-upload-progress-bar").addClass("fail"),a.find("div.js-fail").text(413===d.jqXHR.status?"The image you uploaded was larger than the maximum file size your server allows.":415===d.jqXHR.status?"The image type you uploaded is not supported. Please use .PNG, .JPG, .GIF, .SVG.":"Something went wrong :("),a.find("div.js-fail, button.js-fail").fadeIn(1500),a.find("button.js-fail").on("click",function(){a.css({minHeight:0}),a.find("div.description").show(),c.removeExtras(),c.init()})},done:function(a,b){c.complete(b.result)}})},buildExtras:function(){a.find("span.media")[0]||a.prepend('<span class="media"><span class="hidden">Image Upload</span></span>'),a.find("div.description")[0]||a.append('<div class="description">Add image</div>'),a.find("div.js-fail")[0]||a.append('<div class="js-fail failed" style="display: none">Something went wrong :(</div>'),a.find("button.js-fail")[0]||a.append('<button class="js-fail button-add" style="display: none">Try Again</button>'),a.find("a.image-url")[0]||a.append('<a class="image-url" title="Add image from URL"><span class="hidden">URL</span></a>')},removeExtras:function(){a.find("span.media, div.js-upload-progress, a.image-url, a.image-upload, a.image-webcam, div.js-fail, button.js-fail, a.js-cancel").remove()},initWithDropzone:function(){var c=this;return a.find("img.js-upload-target").css({display:"none"}),a.removeClass("pre-image-uploader image-uploader-url").addClass("image-uploader"),this.removeExtras(),this.buildExtras(),this.bindFileUpload(),b.fileStorage?void a.find("a.image-url").on("click",function(){c.initUrl()}):void c.initUrl()},initUrl:function(){var e,f=this;this.removeExtras(),a.addClass("image-uploader-url").removeClass("pre-image-uploader"),a.find(".js-fileupload").addClass("right"),b.fileStorage&&a.append(d),a.find(".js-cancel").on("click",function(){a.find(".js-url").remove(),a.find(".js-fileupload").removeClass("right"),f.removeExtras(),f.initWithDropzone()}),a.find("div.description").before(c),b.editor&&a.find("div.js-url").append('<button class="js-button-accept button-save">Save</button>'),a.find(".js-button-accept").on("click",function(){e=a.find(".js-upload-url").val(),a.find("div.description").hide(),a.find(".js-fileupload").removeClass("right"),a.find(".js-url").remove(),""===e?(a.trigger("uploadsuccess","http://"),f.initWithDropzone()):f.complete(e)}),b.fileStorage!==!1&&a.append('<a class="image-upload" title="Add image"><span class="hidden">Upload</span></a>'),a.find("a.image-upload").on("click",function(){a.find(".js-url").remove(),a.find(".js-fileupload").removeClass("right"),f.initWithDropzone()})},initWithImage:function(){var b=this;a.removeClass("image-uploader image-uploader-url").addClass("pre-image-uploader"),a.find("div.description").hide(),a.append(d),a.find(".js-cancel").on("click",function(){a.find("img.js-upload-target").attr({src:""}),a.find("div.description").show(),a.delay(2500).animate({opacity:100},1e3,function(){b.init()}),a.trigger("uploadsuccess","http://"),b.initWithDropzone()})},init:function(){var b=a.find("img.js-upload-target");b[0]||a.prepend('<img class="js-upload-target" style="display: none"  src="" />'),$(".js-button-accept").prop("disabled",!1),""===b.attr("src")||void 0===b.attr("src")?this.initWithDropzone():this.initWithImage()}})},d=function(a){var b=$.extend({progressbar:!0,editor:!1,fileStorage:!0},a);return this.each(function(){var a,d=$(this);a=new c(d,b),a.init()})},b["default"]=d});
//# sourceMappingURL=ghost.min.js.map